<!-- <script src="{{ site.assets }}/js/jquery-2.0.3.min.js"></script> -->
<!-- <script src="{{ site.assets }}/js/jquery.imagesloaded.min.js"></script> -->
<!-- <script src="{{ site.assets }}/js/gallery.js"></script> -->
<!-- <script src="{{ site.assets }}/js/jquery.qrcode-0.12.0.min.js"></script> -->
<!-- <script src="{{ site.assets }}/js/toc.js"></script> -->
<!-- <script src="{{ site.assets }}/fancybox/jquery.fancybox.pack.js"></script> -->

<script type="text/javascript">
  if(typeof jQuery != 'undefined'){
    //First choice: js from https://bootcdn.cn
    document.write(unescape("%3Cscript type='text/javascript' src='//cdn.bootcss.com/jquery.imagesloaded/2.1.0/jquery.imagesloaded.min.js'%3E%3C/script%3E"));
    document.write(unescape("%3Cscript type='text/javascript' src='//cdn.bootcss.com/jquery.qrcode/1.0/jquery.qrcode.min.js'%3E%3C/script%3E"));
    document.write(unescape("%3Cscript type='text/javascript' src='//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js'%3E%3C/script%3E"));
  }else{
    //Second choice: js from https://cdnjs.com
    document.write(unescape("%3Cscript type='text/javascript' src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js'%3E%3C/script%3E"));
    document.write(unescape("%3Cscript type='text/javascript' src='http://cdnjs.cloudflare.com/ajax/libs/jquery.qrcode/1.0/jquery.qrcode.min.js'%3E%3C/script%3E"));
    document.write(unescape("%3Cscript type='text/javascript' src='http://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js'%3E%3C/script%3E"));
    document.write(unescape("%3Cscript type='text/javascript' src='http://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/2.1.0/jquery.imagesloaded.min.js'%3E%3C/script%3E"));
  }
</script>


<script type="text/javascript">
  (function($){function Stack(){this.dataStore=[]this.top=0;this.push=push this.pop=pop this.peek=peek this.length=length;this.toc_number=toc_number;this.inc_number=inc_number}function push(element){this.dataStore[this.top++]=element}function peek(element){return this.dataStore[this.top-1]}function pop(){return this.dataStore[--this.top]}function clear(){this.top=0}function length(){return this.top}function toc_number(){var num="";for(i=0;i<this.top;i++){num+=this.dataStore[i]+"."}return num}function inc_number(){this.dataStore[this.top-1]++}$.fn.toc=function(options){var defaults={noBackToTopLinks:false,title:'文章目录',minimumHeaders:3,headers:'h1, h2, h3, h4, h5, h6',listType:'ol',showEffect:'show',showSpeed:'slow'},settings=$.extend(defaults,options);function fixedEncodeURIComponent(str){return encodeURIComponent(str).replace(/[!'()*]/g,function(c){return'%'+c.charCodeAt(0).toString(16)})}var headers=$(settings.headers).filter(function(){var previousSiblingName=$(this).prev().attr("name");if(!this.id&&previousSiblingName){this.id=$(this).attr("id",previousSiblingName.replace(/\./g,"-"))}return this.id}),output=$(this);if(!headers.length||headers.length<settings.minimumHeaders||!output.length){$(this).hide();return}if(0===settings.showSpeed){settings.showEffect='none'}var render={show:function(){output.hide().html(html).show(settings.showSpeed)},slideDown:function(){output.hide().html(html).slideDown(settings.showSpeed)},fadeIn:function(){output.hide().html(html).fadeIn(settings.showSpeed)},none:function(){output.html(html)}};var get_level=function(ele){return parseInt(ele.nodeName.replace("H",""),10)}var highest_level=headers.map(function(_,ele){return get_level(ele)}).get().sort()[0];var return_to_top='<i class="icon-arrow-up back-to-top"> </i>';var stack=new Stack();stack.push(0);var level=get_level(headers[0]),this_level,html="<strong class=\"toc-title\">"+settings.title+"</strong>\n";html+=" <"+settings.listType+" class=\"toc\">";headers.on('click',function(){if(!settings.noBackToTopLinks){window.location.hash=this.id}}).addClass('clickable-header').each(function(_,header){this_level=get_level(header);if(!settings.noBackToTopLinks&&this_level===highest_level){$(header).addClass('top-level-header').after(return_to_top)}if(this_level===level){stack.inc_number();html+="<li class=\"toc-item toc-level-"+this_level+"\">";html+="<a class=\"toc-link\" href='#"+fixedEncodeURIComponent(header.id)+"'>";html+="<span class='toc-number'>"+stack.toc_number()+"</span>"html+="<span class='toc-text'>"+header.innerHTML+"</span>";html+="</a>"}else if(this_level<=level){for(i=this_level;i<level;i++){stack.pop();html+="</li></"+settings.listType+">"}stack.inc_number();html+="<li class='toc-item toc-level-"+this_level+"'><a href='#"+fixedEncodeURIComponent(header.id)+"'>";html+="<span class='toc-number'>"+stack.toc_number()+"</span>"html+="<span class='toc-text'>"+header.innerHTML+"</span>";html+="</a>"}else if(this_level>level){if(stack.length()>1){return}for(i=this_level;i>level;i--){stack.push(0);html+="<"+settings.listType+" class='toc-child'><li class='toc-item toc-level-"+i+"'>"}stack.inc_number();html+="<a href='#"+fixedEncodeURIComponent(header.id)+"'>";html+="<span class='toc-number'>"+stack.toc_number()+"</span>"html+="<span class='toc-text'>"+header.innerHTML+"</span>";html+="</a>"}level=this_level});html+="</"+settings.listType+">";if(!settings.noBackToTopLinks){$(document).on('click','.back-to-top',function(){$(window).scrollTop(0);window.location.hash=''})}render[settings.showEffect]()}})(jQuery);
</script>

<script type="text/javascript">
$(document).ready(function(){$('.navbar').click(function(){$('header nav').toggleClass('shownav')});var myWidth=0;function getSize(){if(typeof(window.innerWidth)=='number'){myWidth=window.innerWidth}else if(document.documentElement&&document.documentElement.clientWidth){myWidth=document.documentElement.clientWidth}};var m=$('#main'),a=$('#asidepart'),c=$('.closeaside'),o=$('.openaside');c.click(function(){a.addClass('fadeOut').css('display','none');o.css('display','block').addClass('fadeIn');m.addClass('moveMain')});o.click(function(){o.css('display','none').removeClass('beforeFadeIn');a.css('display','block').removeClass('fadeOut').addClass('fadeIn');m.removeClass('moveMain')});$(window).scroll(function(){o.css("top",Math.max(80,260-$(this).scrollTop()))});{%if page.type=='post'&&site.close_aside%}getSize();if(myWidth>=1024){c.click()}{%endif%}$(window).resize(function(){getSize();if(myWidth>=1024){$('header nav').removeClass('shownav')}else{m.removeClass('moveMain');a.css('display','block').removeClass('fadeOut');o.css('display','none');{%if page.type=='post'and page.toc!=false and site.toc.aside%}$('#toc.toc-aside').css('display','none');{%endif%}}})});
</script>

{% if page.type == 'post' %}
<script type="text/javascript">
$(document).ready(function(){ 
  $('.toc-content').toc();
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>
{% endif %}

{% if (page.type == 'post' or page.type == 'page' or page.type == 'photo') and !site.jiathis.enable  %}
<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#nothing"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
/*
  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      //$('.hoverqrcode').hide();
  });
  */
});   
</script>
{% endif %}

{% if site.duoshuo_shortname %}
<script type="text/javascript">
  var duoshuoQuery = {short_name:"{{ site.duoshuo_shortname }}"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 
{% endif %}
{% if site.disqus_shortname %}
<script type="text/javascript">
var disqus_shortname = '{{ site.disqus_shortname }}';
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>
{% endif %}

{% if page.type == 'tags' or page.type == 'categories' %}
<script type="text/javascript">
$(document).ready(function(){ 
  var list    = $('.archive-title a'),
      box     = $('.all-list-box'),
      first   = $('.archive-title a:first-of-type');
      box.load(first.attr('data-src').toString()+' #archive-page');
      first.addClass('current');
  list.each(function(){
    $(this).click(function(){
      var listSrc=$(this).attr('data-src').toString()+' #archive-page';
      box.load(listSrc);
      list.removeClass('current');
      $(this).addClass('current');
     });  
    });
  }); 
</script>
{% endif %}

{% if page.type == 'archives' or page.type == 'categories' or page.type == 'tags' %}
<script type="text/javascript">
$(document).ready(function(){
    var show_post = function(anchor) {
        $(".post").hide();
        var cls = anchor.substr(1);
        $("." + cls).show();
        $(".archive-folder").text(cls);
    }
    if (document.location.hash) {
        show_post(document.location.hash);
    }
    $('a[href*=#]').click(function() {
        if (this.hash) {
            show_post(this.hash);
        }
    });
    
});
</script>
{% endif %}

{% if site.fancybox %}
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      if ($(this).hasClass('emoji')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>
{% endif %}

<!-- Analytics Begin -->
{% include _partial/analytics.html %}
<!-- Analytics End -->

<!-- Totop Begin -->
{% include _partial/totop.html %}
<!-- Totop End -->

<!-- MathJax Begin -->
{% include _partial/mathjax.html %}
<!-- MathJax End -->

<!-- Tiny_search Begin -->
{% include _partial/tinysou_search.html %}
<!-- Tiny_search End -->